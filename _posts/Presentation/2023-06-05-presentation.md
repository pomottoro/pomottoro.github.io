---
title: "23-06-05 Presentation"
excerpt: "서비스 모니터링"

categories: ["Presentation"]
tags: ["서비스 모니터링", "Prometheus", "Metric"]

date: 2023-06-05
last_modified_at: 2023-06-05

header:
  overlay_image: assets/images/Thumbnail/infinite.jpg
  overlay_filter: 0.5 
  teaser: assets/images/Thumbnail/Presentation-thumbnail.jpg
published: true
---

# Q1. 모니터링 시스템에는 메트릭 수집을 위한 두 가지 방식의 메커니즘이 존재합니다. 바로 Pull 방식과 Push 방식입니다. 프로메테우스는 어떤 방식의 메커니즘을 사용하나요? 또한 Pull 방식과 Push 방식은 어떻게 다르며, 장단점은 무엇인지, 또한 해당 방식을 사용하는 모니터링 도구는 어떤 것들이 있는지 연구해 보세요.

A. **Pull 방식**

Pull 방식은 모니터링 시스템이 주기적으로 대상 시스템에서 메트릭을 '가져오는' 방식입니다.



장점:

1. 모니터링 시스템이 언제, 어떤 데이터를 수집할지에 대한 완전한 통제권을 가집니다.
2. 네트워크 구성이나 보안 상의 이유로 대상 시스템이 직접적으로 데이터를 밀어넣을 수 없는 경우에 유용합니다.

단점:

1. 서비스가 중단된 경우, 모니터링 시스템이 데이터를 가져올 수 없어서 데이터 손실이 발생할 수 있습니다.
2. 주기적인 데이터 수집 방식이므로 불규칙적이거나 빠른 간격의 메트릭을 잘 수집하지 못할 수 있습니다.



사용하는 모니터링 도구:

1. Prometheus
2. Zabbix
3. Nagios



**Push 방식**

Push 방식은 대상 시스템이 스스로 모니터링 시스템에게 데이터를 '밀어넣는' 방식입니다.



장점:

1. 불규칙적인 간격이나 빠른 간격으로 메트릭이 생성되는 경우에 유용합니다.
2. 서비스가 중단되어도 데이터를 모니터링 시스템에 밀어넣었다면, 데이터 손실이 덜 발생합니다.
3. 서비스가 중단되는 즉시 모니터링 시스템이 알 수 있어, 빠른 알림이 가능합니다.

단점:

1. 대상 시스템에 부하를 줄 수 있으며, 메트릭 데이터가 크면 모니터링 시스템이 과부하될 위험이 있습니다.
2. 네트워크 이슈로 인해 메트릭 전송이 실패할 경우, 데이터 손실이 발생할 수 있습니다.



사용하는 모니터링 도구:

1. Graphite
2. InfluxDB
3. StatsD

# Q.2 어떤 조직의 SLO가 다음과 같습니다. `"GET 호출의 99%는 10ms 이내에 수행되어야 한다"` 그렇다면, 이러한 SLO를 달성하려면 어떤 메트릭을 수집하고 어떻게 계산해야 할까요? (척도는 표준화된 범용 지표를 사용합니다)

- ## SLO?

> SLO는 서비스 수준 목표(Service Level Objective)를 의미하며, 서비스 제공자가 고객에게 제공할 서비스의 성능 수준을 명확하게 정의한 것입니다. 여기서 언급된 SLO는 "GET 호출의 99%는 10ms 이내에 수행되어야 한다"입니다. 이 SLO를 측정하고 평가하기 위해서는 아래와 같은 단계를 거칩니다.

1. **메트릭 수집:**

   가장 먼저 수행해야 할 작업은 필요한 메트릭을 수집하는 것입니다. 이 경우에는 "GET 호출의 응답 시간"이 필요합니다. 이 메트릭은 사용자의 요청(GET 호출)이 서버에 도달하는 시점부터 서버로부터 응답이 완전히 반환되는 시점까지의 시간을 의미합니다.

   이를 위해 로깅 시스템, APM(Application Performance Monitoring) 도구, 사용자 정의 모니터링 시스템 등 다양한 방법을 사용할 수 있습니다. 이러한 도구를 이용하면 각 요청에 대한 응답 시간을 자동으로 수집하고, 이를 데이터베이스 등에 저장하여 분석할 수 있게 해줍니다.

2. **데이터 분석 및 퍼센타일 계산:**

   응답 시간 데이터가 충분히 수집되었다면, 이 데이터를 분석해야 합니다. 이를 위해 통계적인 방법을 사용합니다. 이 경우에는 **퍼센타일(percentile)**을 계산해야 합니다.

   **퍼센타일**은 일련의 값들을 작은 것부터 큰 것까지 순서대로 정렬했을 때, 그 중 특정 백분율에 해당하는 값을 찾는 통계적인 방법입니다. 예를 들어, <u>99퍼센타일은 모든 값들 중에서 가장 빠른 상위 1%의 값이 위치하는 지점을 의미</u>합니다.

   따라서 이 SLO를 평가하기 위해서는 모든 GET 호출의 응답 시간을 정렬하고, 이 중에서 상위 1%에 해당하는 지점의 응답 시간을 찾아야 합니다. 이 값이 10ms 이하라면, 이 SLO를 만족하는 것입니다.

3. **SLO 모니터링 및 개선:**

   SLO를 측정하는 것만큼 중요한 것이 그 결과를 지속적으로 모니터링하고, 필요한 경우 개선하는 것입니다. 이를 위해 퍼센타일 응답 시간을 주기적(예: 매 시간, 매 일 등)으로 계산하고, 이 값을 시각화하여 모니터링합니다.

   이를 통해 서비스의 성능 트렌드를 파악하고, 문제가 발생한 경우 즉시 대응할 수 있습니다. 또한, 성능이 SLO를 만족하지 못하는 경우에는 서비스 성능을 개선하기 위한 조치를 취하게 됩니다.

이상이 SLO를 측정하고 평가하는 기본적인 과정입니다. 이 과정은 매우 중요하며, 서비스 제공자와 고객 사이의 신뢰를 구축하는 데에 큰 역할을 합니다. 적절한 SLO 설정과 이를 통한 성능 관리를 통해 고객에게 높은 수준의 서비스를 제공할 수 있습니다.

<br>

---

<br>
